




<!DOCTYPE html>
<html>
<head>
<style>
ul.breadcrumb {
    padding: 10px 16px;
    list-style: none;
    background-color: #eee;
}
ul.breadcrumb li {
    display: inline;
    font-size: 18px;
}
ul.breadcrumb li+li:before {
    padding: 8px;
    color: black;
    content: "/\00a0";
}
ul.breadcrumb li a {
    color: #0275d8;
    text-decoration: none;
}
ul.breadcrumb li a:hover {
    color: #01447e;
    text-decoration: underline;
}

#myContainer {
  width: 400px;
  height: 400px;
  position: relative;
  background: black;
}
#myAnimation {
  width: 50px;
  height: 50px;
  position: absolute;
  background-color: blue;
}
#myKline1{
  width: 14px;
  height: 150px;
  left:50px;
  top:200px;
  position: absolute;
  background-color: white;

}
#myKline1-oc{
  width: 10px;
  height: 10px;
  left:2px;
  top:50px;
  position: relative;
  background-color: red;

}
#myKline1-hl{
  width: 2px;
  height: 100px;
  left:4px;
  top:-10px;
  position: relative;
  background-color: green;

}
</style>
</head>
<body>

<h2>DrawKlines Test4</h2>
<ul class="breadcrumb">
  <li><a href="..">[..]</a></li>
  <li><a href=".">[.]</a></li>
  <li><a target="_blank" href="https://github.com/littleflute/blog/edit/master/trading/DrawKlines/test4.html">v0.5.3</a></li>
  <li><a target="_blank" href="https://www.w3schools.com/html/tryit.asp?filename=tryhtml_default">dev1</a></li>
  <li><a href="https://www.w3schools.com/howto/howto_css_breadcrumbs.asp">ref1</a></li>
  <li><a href="https://www.w3schools.com/howto/howto_js_animate.asp">ref2</a></li>
  <li><a href="https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_event_mouse_clientxy2">ref3</a></li>
  <li>test4</li>
</ul>



<p>
<button onclick="myMove()">Click Me</button> 
</p>

<div id ="myContainer">
  <div id ="myAnimation">
  </div>
  <div id ="myKline1">
    <div id ="myKline1-oc"><div id ="myKline1-hl"></div></div>
    
  </div>
</div>

<script>
function myMove() {  
  var pos = 0;
  var id = setInterval(frame, 10);
  function frame() {
    if (pos == 350) {
      clearInterval(id);
    } else {
      pos++; 
      myAnimationMoveTo(pos); 
    }
  }
}

function myAnimationMoveTo(pos) {   
    var elem = document.getElementById("myAnimation");  
    elem.style.top = pos + 'px'; 
    elem.style.left = pos + 'px';  
}
function blDiv(oBoss,id,html,x,y,w,h,color){
    var r = document.getElementById(id);
    if(!r){
        r = document.createElement("div");
        r.id = id;
    	if(oBoss!=null) oBoss.appendChild(r);
    }
    var s = r.style;
    s.border = "1px solid #3d3d3d";
    s.position = "absolute";
    s.top	= y + "px";
    s.left = x + "px";
    s.width = w +"px";
    s.height = h + "px";
    s.backgroundColor = color;
    s.display = "block";

    r.innerHTML = html;  
    return r;
}
function blKline1(contaniner,t,o,h,l,c) {     
    
    var kID 	= t;
    var x 		= xMin + t*xD;
    var yH		= yMin + (yMax-yMin)/(hMin-hMax)*(h-hMax); 
    var yL		= yMin + (yMax-yMin)/(hMin-hMax)*(l-hMax); 
    var yO		= yMin + (yMax-yMin)/(hMin-hMax)*(o-hMax); 
    var yC		= yMin + (yMax-yMin)/(hMin-hMax)*(c-hMax); 
    var k = blDiv(contaniner,kID,"k",x,yH,xD-10,yL-yH,"white");
   //*
   var yOC 		= 0;
   var HeighOC 	= 0;
   var color	= "fff";
   if(c>o) 
   {
   		HeighOC 	= yO -yC;
        yOC 		= yC; 
        color		= "red";
	}
    else
    {
   		HeighOC 	= yC -yO;
        yOC 		= yO; 
        color		= "green";
    }
   
   var kOCID = kID + "oc";
    var oc1 = blDiv(contaniner,kOCID,"",x+2,yOC,xD-12,HeighOC,color); 
    var kHLID = kID + "hl";
    var hl1 = blDiv(contaniner,kHLID,"",x+7,yH,1,yL-yH,color); 
    // */    
 
}
	var xMin	= 100;
    var xD		= 24;
    var yMin	= 0;
    var yMax	= 400;
    var hMin	= 1200;
    var hMax	= 1400;
 
function showMouse(x,y) { 
 	var c = document.getElementById("myContainer"); 
	var div_Mouse = blDiv(c,"div_mouse","",0,y,400,1,"red"); 
   // /*
    if(x>0&&x<400&&y>0&&y<400)
    {
    	div_Mouse.style.display = "block";
    }
    else
    {
    	div_Mouse.style.display = "none";
    }
    //*/
}
function showCoords(e) {
    e = e || window.event;
    var x = e.clientX - this.offsetLeft;
    var y = e.clientY - this.offsetTop;
    //*
    var kVal = hMax + (hMin-hMax)/(yMax-yMin)*(y-yMin); 
    var coor =   "X coords: " + x + ", Y coords: " + y + ", kVal: " + kVal;
//*/    
    document.getElementById("div_Msg").innerHTML = coor;
    
    showMouse(x,y);
}

function clearCoords() {
    document.getElementById("div_Msg").innerHTML = "";
    showMouse(-11,-500);
}
function initDrawing(contaniner) { 
	var div_hMin = blDiv(contaniner,"div_hMin",hMin,400,400-24,111,22,"red");
	var div_hMax = blDiv(contaniner,"div_hMax",hMax,400,0,111,22,"green");
	var div_Msg = blDiv(contaniner,"div_Msg","",400,122,311,22,"yellow");
    contaniner.onmousemove = showCoords;
    contaniner.onmouseout = clearCoords;
    
    function elementDrag(e) {
     
    pos3 = e.clientX;
    pos4 = e.clientY; 
  }

}  
function myLoad() {   
    var c = document.getElementById("myContainer"); 
    initDrawing(c);
    blKline1(c,1,1300,1350,1290,1320); 
    blKline1(c,2,1325,1370,1280,1304); 
    blKline1(c,3,1310,1370,1290,1314); 
}
myLoad();
</script>

</body>
</html>

